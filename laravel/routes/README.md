# Маршрутизация запросов

**URI** - [http://yandex.ru/page1/index.html](http://yandex.ru/page1/index.html)

**URL** - [http://yandex.ru](http://yandex.ru)

**URN** - /page1/index.html

Маршруты прописываются в папке **/routes/**

Пример создания маршрута:  
Обращаемся к фасаду **Route, **вызываем метод соотвесвтующий **http** запросу, т.е. **get, post** и т.д.  
**В пермов** параметре метода, передаем **шаблон маршрута.**  
**Во второй** параметр передается **массив**, **функция обрботчик **или** контролер и метод контролера .**

```php
Route::get('/admin/',function(){
    echo "Hello";
    return null;
});
```

Для обработки параметров, используются **{} **в **шаблоне маршрута. **Внутри **{} **указываем** id парметра.** Для получения доступа к значению передаваемого параметра, функции обраотчик передав указываем параметры, параметрами функции обработчика.  
Параметры из шаблон, в функцию обработчик передаются в том же порядке, а не по имени.

Что бы сделать параметр не обязательным, в шаблоне маршрута, конце идентификатора поставдяется знак вопроса "**?**", а в функции обработчик, надо присвоить значение по умолчанию

```php
Route::get('/news/{section}/{id?}',function($sect,$id=null){
    echo "Hello";
    return null;
});
```

Для фильтрации параметров, те создания условия по которым будет срабаывать роуте, используется метот [**where\(\)**](https://laravel.com/api/5.6/Illuminate/Routing/Route.html#method_where)**.**

```
Route::get('/news/{section}/{id?}',function($sect,$id=null){
    echo "Hello";
    return null;
})->where('id','[0-9]+');
```

Что бы применить фильтрацию для параметра для всех маршрутов, те глобально, необходимо написать регулярное выражения в **сервис-првоайдере Route**, в **методе boot.                  
**Открываем файл **app/Providers/RouteServiceProvider.php**, в методе **boot** добавляем:

```
public function boot()
{
    //
    $route = Route::pattern('id','[0-9]+');
    parent::boot($route);
}
```

Иногда необходимо сгрупировать маршруты. К примеру есть группа маршрутов которые начинаются одинаково, /admin/ тут мы и применим группировку маршрутов, метод [**group**](https://laravel.com/api/5.2/Illuminate/Routing/Router.html#method_group).  
**Первый параметр** - массив параметров группы. Параметр **prefix** - Псевдоним для всех маршрутов этой группы. Он добавляется для всех маршрутов этой группы.

```
Route::group(['prefix'=>"admin"],function(){
    Route::get('/page/add',function(){
        echo "add";
    });
    Route::get('/page/edit',function(){
        echo "edit";
    });
});
```

Для генерации ссылок на другие страницы, используют имена роутеров. Т.е. у нас есь **Route** который формирует ссылку на какую то страницу, нам надо сгенерировать на основе этого **Route** ссылку, для это используется имена роутеров.  
Присвоим к маршуту корня сайта, имя '**home**'

```
Route::get('/', ['as'=>'home',function () {
    return view('welcome');
}]);
```

Если во второмо параметре у нас вызов контролера происходит, тогда необходимо передать даные в следующем формате:

```
Route::get('/', ['as'=>'home','uses'=> 'homeController@getHome']);
```

Второй сопособ присвоения имени для маршрута:

```
Route::get('/',function () {
    return view('welcome');
})->name('home');
```

**Именование маршрута вызывающий метот controller. **Мы указываем название вызываемого метода маршрута, до имени маршрута. В дамном примере по имени маршрута "**get.news**" будет вызван метод контролера **getNews**

```
Route::controller('/news','FistController',['getNews'=>'get.news']);
```

А вот так фомируется ссылка на основе название маршрута

```
Route::get('/news/{section}/{id}',function($sect,$id){
    echo route('home')."\Hello";
    return null;
});

Route::get('/', ['as'=>'home',function () {
    return view('welcome');
}]);
```

Также можно формировать ссылки на имена, маршруты у которых определены параметры. Для этого вызявая функцию **route,** вторым ее параметром передаем массив, где ключ это название параметра, а значение это передаваемое значение параметра.

```
Route::get('/news/{id}',["as"=>"news",function($id){
    echo "News".$id;
    return null;
}]);

Route::get('/', ['as'=>'home',function () {
    echo route('news',['id'=>23]);
}]);
```



